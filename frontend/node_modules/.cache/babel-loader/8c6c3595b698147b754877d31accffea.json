{"ast":null,"code":"import _classCallCheck from \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/src/containers/NewBookingContainer.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport Request from \"../helpers/requests.js\";\nimport NewCustomer from \"../Components/NewCustomerComponent\";\nimport \"./css/NewBookingContainer.css\";\n\nvar NewBookingContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewBookingContainer, _Component);\n\n  function NewBookingContainer(props) {\n    var _this;\n\n    _classCallCheck(this, NewBookingContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewBookingContainer).call(this, props));\n    _this.state = {\n      redirect: false\n    };\n    _this.handleNewBookingSubmit = _this.handleNewBookingSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleNewCustomer = _this.handleNewCustomer.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(NewBookingContainer, [{\n    key: \"setRedirect\",\n    value: function setRedirect() {\n      this.setState({\n        redirect: true\n      });\n      console.log('updated state');\n    }\n  }, {\n    key: \"renderRedirect\",\n    value: function renderRedirect() {\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: \"/target\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28\n          },\n          __self: this\n        });\n      }\n    }\n  }, {\n    key: \"handleNewBookingSubmit\",\n    value: function handleNewBookingSubmit(event) {\n      event.preventDefault();\n      console.log(this.props.id, this.props.day, this.props.month, this.props.time); // console.log(event.target.customers.value)\n\n      var request = new Request();\n      request.post('/bookings', {\n        \"customer\": \"http://localhost:8080/customers/\" + event.target.customers.value,\n        \"restaurantTable\": \"http://localhost:8080/restaurantTable/\" + this.props.id,\n        \"day\": this.props.day,\n        \"month\": this.props.month,\n        \"time\": this.props.time\n      });\n      this.renderRedirect();\n      this.props.getData();\n    }\n  }, {\n    key: \"handleNewCustomer\",\n    value: function handleNewCustomer(newCustomer) {\n      var _this2 = this;\n\n      var request = new Request();\n      request.post('/customers', {\n        name: newCustomer\n      }).then(function (_) {\n        return _this2.props.getData();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var customerOptions = this.props.customers.map(function (customer, index) {\n        return React.createElement(\"option\", {\n          key: index,\n          value: customer.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, customer.name);\n      });\n      return React.createElement(\"div\", {\n        className: \"newbooking\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.renderRedirect(), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"New booking\"), React.createElement(\"form\", {\n        onSubmit: this.handleNewBookingSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"customerSpan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Customers:\"), React.createElement(\"select\", {\n        id: \"customers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, customerOptions), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \" Table: \", this.props.id), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \" Date: \", this.props.day, \"/\", this.props.month, \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \" Time: \", this.props.time, \" \"), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(NewCustomer, {\n        handleNewCustomer: this.handleNewCustomer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return NewBookingContainer;\n}(Component);\n\nexport default NewBookingContainer;","map":{"version":3,"sources":["/Users/martin/Desktop/CodeClan/april/final_project/front_End_Resturant_Booking_System_project/src/containers/NewBookingContainer.js"],"names":["React","Component","Redirect","Request","NewCustomer","NewBookingContainer","props","state","redirect","handleNewBookingSubmit","bind","handleNewCustomer","setState","console","log","event","preventDefault","id","day","month","time","request","post","target","customers","value","renderRedirect","getData","newCustomer","name","then","_","customerOptions","map","customer","index"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport Request from \"../helpers/requests.js\";\nimport NewCustomer from \"../Components/NewCustomerComponent\";\n\nimport \"./css/NewBookingContainer.css\";\n\nclass NewBookingContainer extends Component {\n  constructor (props)  {\n    super(props)\n    this.state = {\n      redirect: false\n    }\n\n    this.handleNewBookingSubmit = this.handleNewBookingSubmit.bind(this);\n    this.handleNewCustomer = this.handleNewCustomer.bind(this);\n  }\n\n  setRedirect(){\n    this.setState({\n      redirect: true\n    })\n    console.log('updated state')\n  }\n\n  renderRedirect() {\n    if (this.state.redirect) {\n      return <Redirect to='/target' />\n    }\n  }\n\n  handleNewBookingSubmit(event) {\n    event.preventDefault()\n    console.log(this.props.id, this.props.day, this.props.month, this.props.time)\n    // console.log(event.target.customers.value)\n    const request = new Request();\n    request.post('/bookings', {\n      \"customer\": \"http://localhost:8080/customers/\" + event.target.customers.value,\n      \"restaurantTable\": \"http://localhost:8080/restaurantTable/\" + this.props.id,\n      \"day\": this.props.day,\n      \"month\": this.props.month,\n      \"time\": this.props.time\n    })\n    this.renderRedirect();\n\n    this.props.getData()\n\n  }\n\n  handleNewCustomer(newCustomer){\n    const request = new Request();\n    request.post('/customers', {name: newCustomer})\n      .then(_ => this.props.getData())\n  }\n  render() {\n\n    const customerOptions = this.props.customers.map((customer, index) => {\n      return <option key={index} value={customer.id}>{customer.name}</option>\n    })\n\n    return (\n      <div className=\"newbooking\">\n        {this.renderRedirect()}\n      <h4>New booking</h4>\n      <form onSubmit={this.handleNewBookingSubmit}>\n      <span className=\"customerSpan\">Customers:</span>\n      <select id=\"customers\">\n      {customerOptions}\n      </select>\n      <p> Table: {this.props.id}</p>\n      <p> Date: {this.props.day}/{this.props.month} </p>\n      <p> Time: {this.props.time} </p>\n      <input type=\"submit\" />\n\n      </form>\n\n\n      <form>\n\n      <NewCustomer handleNewCustomer={this.handleNewCustomer} />\n      </form>\n      </div>\n    )\n  }\n}\n\n\nexport default NewBookingContainer;\n"]},"metadata":{},"sourceType":"module"}